package com.docsbymario.server;

import org.osgi.service.component.annotations.Activate;
import org.osgi.service.component.annotations.Component;
import org.osgi.service.component.annotations.Reference;

import com.docsbymario.blacklist.Blacklist;

@Component(
    property= {
        "osgi.command.scope:String=docsbymario",
        "osgi.command.function:String=start"
    },
    service=Server.class
)
public class Server {
	@Reference
	private Blacklist blacklist;
	
	public void start() {
		// Wait for connection
		// If a connection is received, check name and ipaddress by going inside the blacklist
		System.out.println(blacklist.disallow(name, ipAddress, location));
	}
	
	@Activate
	public void activate() {
	    System.out.println("Server component activated");
	    disallow("testuser", "192.168.0.100", "TestRegion");
	}
}
